<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:ui = "http://java.sun.com/jsf/facelets"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:c="http://xmlns.jcp.org/jsp/jstl/core"
      xmlns:p="http://primefaces.org/ui">

        <ui:composition template="template.xhtml">            
            <ui:define name="corpo">
                
                <h:form id="index">                    
                    <div style="margin: 0 5% 0 25%" class="w3-container">
                        <h:panelGroup layout="block" styleClass="form-group">
                            <h:messages 
                                infoClass="alert alert-success" 
                                errorClass="alert alert-danger"                            
                                style="list-style:none; margin:0; padding:0" />
                        </h:panelGroup>
                    </div>
                </h:form>
                
                <h:form> 
                    <div style="margin: 0 5% 0 25%" class="w3-container">                                                                                                          
                        <h2>Lista de Eventos</h2>                                   
                        <c:forEach var="e" items="#{eventoBean.findAll()}">
                            <div class="w3-card-4" style="margin-top: 2%; margin-bottom: 3%; width:100%">                                

                                <div class="w3-container">                                    
                                                               
                                    <h:graphicImage name="#{eventoBean.imagem(e.idGerado)}" alt="Logo do Evento" class="w3-left w3-margin-right addMargin"  style="width:20%"/>
                                    <h6 class="addMargin"><strong>#{e.nome}</strong></h6>                                    
                                    <p>
                                        <strong>Data de In√≠cio: </strong>
                                        <h:outputText value="#{e.dtInicio}">
                                            <f:convertDateTime pattern="dd/MM/yyyy" />
                                        </h:outputText>
                                    </p>
                                    <p>
                                        <strong>Data de Fim: </strong> 
                                        <h:outputText value="#{e.dtFim}">
                                            <f:convertDateTime pattern="dd/MM/yyyy" />
                                        </h:outputText>
                                    </p>
                                    <p>                                        
                                        <h:commandLink rendered="#{regrasBean.verificaAdministrador()}" action="#{eventoBean.apagar(e.id)}" class="glyphicon glyphicon-trash" style="margin-right: 1%" />
                                        <h:commandLink rendered="#{regrasBean.verificaAdministrador()}" action="#{eventoBean.prepararEdicao(e)}" class="glyphicon glyphicon-pencil" />
                                    </p>
                                </div>                               
                                <h:commandLink action="#{eventoBean.mostrarEvento(e)}" class="w3-button w3-block w3-dark-grey" id="verDetalhes" value="Ver mais">
                                    <f:param id="id" name="id" value="#{e.idGerado}" />
                                </h:commandLink>
                            </div>

                        </c:forEach>                     
                   </div>                    
                </h:form>
        </ui:define>
    </ui:composition>
    
</html>