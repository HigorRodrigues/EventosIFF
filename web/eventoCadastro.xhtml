<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:ui = "http://java.sun.com/jsf/facelets"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:c="http://xmlns.jcp.org/jsp/jstl/core"
      xmlns:p="http://primefaces.org/ui">
        
    <ui:composition template="template.xhtml">
        <ui:define name="corpo">
            
        <div style="margin: 0 5% 0 25%" class="w3-card-4">        
                        
            <h:form enctype="multipart/form-data">
                <div class="w3-container w3-black">
                    <h2>Cadastro de Evento</h2>
                </div>
                
                <div class="w3-container">
                    
                    <div id="search" style="width: 50%;" class="addMargin">
                        
                        <h:inputText value="#{eventoBean.dono}" class="w3-input" autocomplete="off" id="dono">
                            <f:passThroughAttribute name="placeHolder" value="Dono do evento"/>
                            <f:ajax event="keyup" listener="#{eventoBean.search()}" execute="@this" render="result-panel"/>
                        </h:inputText>
                        
                        <h:panelGroup id="result-panel" layout="block">
                            <ul class="w3-ul w3-hoverable">
                                <ui:repeat var="p" value="#{eventoBean.resultadoPessoas}" >
                                    <li>
                                        <h:commandButton style="width: 100%" class="w3-button w3-left-align" value="#{p.getNome()}" >
                                            <f:ajax event="mousedown" listener="#{eventoBean.clickDono(p)}" execute="@this" render="teste"/>
                                        </h:commandButton>                                                                                                                                
                                    </li>
                                </ui:repeat>
                            </ul>
                            <h:outputText id="teste" value="#{eventoBean.dono1}"></h:outputText>
                        </h:panelGroup>
                        
                    </div>
                    
                    <div class="addMargin">
                        <h:outputLabel for="nome" value="Nome: "/>
                        <h:inputText id="nome" value="#{eventoBean.nome}" style="width: 30%" class="w3-input w3-animate-input"/>   
                    </div>                                                    
                    
                    <div class="addMargin">
                        <h:outputLabel for="unidade" value="Realização: "/>                    
                        <h:selectOneMenu value="#{eventoBean.id_unidade}" class="w3-select">
                            <f:selectItem itemValue="" itemLabel="Escolha uma Unidade" />
                            <f:selectItems value="#{unidadeBean.allUnidades()}" var="u" itemLabel="#{u.nome}" itemValue="#{u.id}" />
                        </h:selectOneMenu>
                    </div>
                    <h:link outcome="cadastrarUnidade" type="button" class="removeMargin w3-btn w3-black addMargin" value="Cadastrar Unidade" />                                        
                    
                    <div class="addMargin">
                        <h:inputFile rendered="#{eventoBean.id == null}" value="#{eventoBean.image}">
                            <f:passThroughAttribute name="accept" value=".jpg"/>
                        </h:inputFile>                        
                        
                    </div>
                    
                    <div class="addMargin">
                        
                        <h5>O evento terá certificado único?</h5>
                        <h:selectOneRadio value="#{eventoBean.certificadoUnico}">
                            <f:selectItem class="w3-radio" itemValue="true" itemLabel="Sim" />
                            <f:selectItem class="w3-radio" itemValue="false" itemLabel="Não" />
                        </h:selectOneRadio>
                    </div>
                
                    <div class="addMargin">
                        <h5>O evento terá inscrição?</h5>
                        <h:selectOneRadio value="#{eventoBean.temInscricao}">
                            <f:selectItem class="w3-radio" itemValue="true" itemLabel="Sim" />
                            <f:selectItem class="w3-radio" itemValue="false" itemLabel="Não" />
                        </h:selectOneRadio>
                    </div>                                                        
                
                    <div class="addMargin">
                        <h:outputLabel for="dataInicio" value="Data Início: "/><br/>
                        <p:calendar style="width: 30%" styleClass="w3-input w3-animate-input" 
                                    id="dataInicio" value="#{eventoBean.dtInicio}"/>
                    </div>                                                                      
                    
                    
                    <div class="addMargin">
                        <h:outputLabel for="dataFim" value="Data Fim: "/><br/>
                        <p:calendar timeZone="Brasília Time" style="width: 30%" styleClass="w3-input w3-animate-input" 
                                    id="dataFim" value="#{eventoBean.dtFim}"/>
                    </div>
                </div>
                <hr class="removeMargin  w3-black" />
                <div class="w3-center">
                    <h:commandButton value="Salvar" action="#{eventoBean.salvar()}" class="w3-btn w3-black addMargin">
                        <f:ajax execute="@all" render=":index" />
                    </h:commandButton>
                </div>
            </h:form>
        </div>
        </ui:define>
        
    </ui:composition>
</html>
